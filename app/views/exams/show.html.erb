<div class="container box">
  <div class="row">
    <div class="col">
      <h1><%= @exam.title %></h1>
    </div>
    <div class="col text-right">
      <%= link_to 'Edit', edit_course_exam_path(@exam.course, @exam), class: "btn btn-info" %>
      <%= link_to 'Delete', course_exam_path(@exam.course, @exam), :data => {:confirm => 'Are you sure?'}, :method => :delete, class: "btn btn-danger" %>
      <%= link_to "Back", course_path(@exam.course), class: "btn btn-secondary" %>
    </div>
  </div>
  <p>
    <b>Date:</b>
    <%= @exam.date %>
  </p>

  <p>
    <b>Minimum:</b>
    <%= @exam.minimum %>
  </p>

  <div class="row">
    <div class="col">
      <% if @exam.course.has_students? %>
        <%= form_for([@exam.course, @exam], url: results_course_exam_path(@exam.course, @exam), method: :patch) do |f| %>
          <table class="table table-striped table-bordered results-table" cellspacing="0" width="100%">
            <thead>
              <tr>
                <th scope="col">Name</th>
                <th scope="col">DNI</th>
                <th scope="col">Number</th>
                <th scope="col">Score</th>
              </tr>
            </thead>
            <tbody>
              <%= f.fields_for :results do |result| %>
                <tr>
                  <td><%= result.object.student %></td>
                  <td><%= result.object.student.dni %></td>
                  <td><%= result.object.student.number %></td>
                  <td>
                    <div class="field">
                      <%= result.number_field :score, class: 'form-control' %>
                      <%= result.hidden_field :student_id %>
                    </div>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
          <div class="actions">
            <%= f.submit "Update Results", class: 'btn btn-primary' %>
          </div>
        <% end %>
      <% else %>
        <div class="row">
          <div class="col">
            <div class="card mx-auto card-box" style="width: 20rem;">
              <div class="card-body text-center">
                <h4 class="card-title">Lo sentimos :(</h4>
                <h6 class="card-subtitle mb-2 text-muted">Esta cursada no dispone de estudiantes</h6>
                <i class="fas fa-exclamation-triangle empty-alert"></i>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>